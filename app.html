
<!DOCTYPE html>
<html>
<body>
	<h2>My Gold</h2>
	<input id=brand placeholder=Brand>
	<input id=gram placeholder=Gram>
	<input id=buy_date type=date>
	<input id=buy_price placeholder="Buy Price">
	<button onclick=save()>SAVE</button>

	<pre id=out></pre>

	<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
	<script>
		supabase.createClient('https://iwsacljessokrqhfmdbv.supabase.co','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml3c2FjbGplc3Nva3JxaGZtZGJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjgxODcyNTMsImV4cCI6MjA4Mzc2MzI1M30.jQ_8KR76Xbbn1Heest75p3I78J6oiSt9V-H31cWWLOo');
		async function save() {
			const s=await supabase.auth.getSession();
			await fetch('/api/portfolio',{method:'POST',headers:{'Content-Type':'application/json','Authorization':'Bearer '+s.data.session.access_token},
			body:JSON.stringify({brand:brand.value,gram:gram.value,buy_date:buy_date.value,buy_price:buy_price.value})});
			load();
		}

		async function load() {
			const s=await supabase.auth.getSession();
			const r=await fetch('/api/portfolio',{headers:{'Authorization':'Bearer '+s.data.session.access_token}});
			out.innerText=JSON.stringify(await r.json(),null,2);
		}
		
		load();
	</script>
</body>
</html>
