<h2>Galeri24</h2>
<pre id="galeri24">Loading...</pre>

<h2>Sampoerna Gold</h2>
<pre id="sampoerna">Loading...</pre>

<script>
const CORS_PROXY = "https://api.allorigins.win/raw?url=";

async function fetchHTML(url) {
	const res = await fetch(CORS_PROXY + encodeURIComponent(url));
	return res.text();
}

function parseGaleri24(doc) {
	const result = [];

	const categories = document.querySelectorAll('#GALERI\\ 24, #DINAR\\ G24, #BABY\\ GALERI\\ 24, #ANTAM, #UBS');

	categories.forEach(categoryEl => {
		const category = categoryEl.id;

		const rows = categoryEl.querySelectorAll('.grid.grid-cols-5.divide-x.lg\\:hover\\:bg-neutral-50');

		rows.forEach(row => {
			const cols = row.querySelectorAll('div');
			if (cols.length < 3) return;

			result.push({
				category,
				gram: cols[0].innerText.trim(),
				harga_jual: cols[1].innerText.trim(),
				harga_buyback: cols[2].innerText.trim()
			});
		});
	});

	return result
}

async function loadGaleri24() {
	const html = await fetchHTML("https://galeri24.co.id/harga-emas");
	const doc = new DOMParser().parseFromString(html, "text/html");
	const data = parseGaleri24(doc);
	
	document.getElementById("galeri24").textContent =
	JSON.stringify(data, null, 2);
}

function parseTable(doc) {
	const data = [];
	doc.querySelectorAll("table tr").forEach(row => {
	const cols = row.querySelectorAll("td");
	if (cols.length >= 3) {
		data.push({
		category: "SAMPOERNA",
		gram: cols[0].innerText.trim(),
		jual: cols[1].innerText.trim(),
		buyback: cols[2].innerText.trim()
		});
	}
	});
	return data;
}


async function loadSampoerna() {
	const html = await fetchHTML("https://sampoernagold.com/");
	const doc = new DOMParser().parseFromString(html, "text/html");
	const data = parseTable(doc);

	document.getElementById("sampoerna").textContent =
	JSON.stringify(data, null, 2);
}

loadGaleri24();
loadSampoerna();
</script>