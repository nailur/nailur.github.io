<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Harga Emas</title>

	<style>
		body {
		margin: 0;
		font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
		background: #0b1220;
		color: #e5e7eb;
		}

		header {
		padding: 16px;
		background: #020617;
		position: sticky;
		top: 0;
		z-index: 10;
		border-bottom: 1px solid #1e293b;
		}

		h1 {
		font-size: 18px;
		margin: 0;
		}

		.updated {
		font-size: 12px;
		color: #94a3b8;
		margin-top: 4px;
		}

		.container {
		padding: 12px;
		}

		.card {
		background: #020617;
		border: 1px solid #1e293b;
		border-radius: 10px;
		padding: 12px;
		margin-bottom: 10px;
		}

		.top {
		display: flex;
		justify-content: space-between;
		margin-bottom: 6px;
		}

		.category {
		font-weight: 600;
		font-size: 14px;
		}

		.gram {
		font-size: 13px;
		color: #94a3b8;
		}

		.prices {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 8px;
		}

		.price-box {
		background: #020617;
		border: 1px solid #334155;
		border-radius: 8px;
		padding: 8px;
		}

		.label {
		font-size: 11px;
		color: #94a3b8;
		}

		.value {
		font-size: 14px;
		font-weight: 600;
		margin-top: 2px;
		}

		.loading,
		.error {
		text-align: center;
		padding: 20px;
		color: #94a3b8;
		}
	</style>
</head>
<body>

<header>
	<h1>Harga Emas</h1>
	<div class="updated" id="updated">Loading…</div>
</header>

<div class="container" id="list">
	<div class="loading">Loading data…</div>
</div>

<script>
	const API_URL = "https://nailur.vercel.app/api/harga-emas";

	async function loadData() {
		const list = document.getElementById("list");
		const updated = document.getElementById("updated");

		try {
			const res = await fetch(API_URL);
			const json = await res.json();

			updated.textContent =
			"Updated: " + new Date(json.updated_at).toLocaleString();

			list.innerHTML = "";

			json.data.forEach(item => {
			const card = document.createElement("div");
			card.className = "card";

			card.innerHTML = `
				<div class="top">
				<div class="category">${item.category}</div>
				<div class="gram">${item.gram}</div>
				</div>

				<div class="prices">
				<div class="price-box">
					<div class="label">Jual</div>
					<div class="value">${item.jual}</div>
				</div>
				</div>
			`;

			list.appendChild(card);
			});

		} catch (err) {
			list.innerHTML = `
			<div class="error">
				Failed to load data
			</div>
			`;
		}
	}

	loadData();
</script>

</body>
</html>